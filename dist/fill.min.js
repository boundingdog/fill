/**
  * Fill - A lightweight JavaScript layout library.
  * ver. 0.2.0 (2015-02-27)
  * git: https://github.com/boundingdog/fill
  *
  * (c) 2014-2015 boundingdog, LLC
  * Licensed MIT 2015 boundingdog, LLC (http://www.boundingdog.com)
  **/

var fill=fill||{};fill.classes=fill.classes||{},function($){var DATA_REGEX=/\b([\w|-]+)\s*:\s*([\w|"|'|\*]+)\s*;?/g,region=function(el,options){this.el=el,this._init(options)};region.prototype.type="Region",region.prototype._init=function(options){var str,val,contentClass,defaults;if(this._computed={},this._origStyle=this.el.attr("style"),this.el.css({position:"absolute",margin:0,padding:0}),defaults={row:-1,col:-1,rowSpan:1,colSpan:1,contentClass:"",top:!1,right:!1,bottom:!1,left:!1},this._properties=$.extend({},defaults,options),str=this.el.data("fill"))for(;null!==(match=DATA_REGEX.exec(str));)3===match.length&&(val=match[2],isNaN(val)||(val=parseInt(val,10)),this._properties[match[1]]=val);contentClass="",this._properties.contentClass&&""!==this._properties.contentClass.trim()&&(contentClass=this._properties.contentClass),this.el.wrapInner("<div class='fill-region-wrapper "+contentClass+"' style='-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box'></div>")},region.prototype.get=function(name){return"undefined"!=typeof this._computed[name]?this._computed[name]:"undefined"!=typeof this._properties[name]?this._properties[name]:null},region.prototype.setComputed=function(name,value){this._computed[name]=value},region.prototype.setEdges=function(top,right,bottom,left){var removeClass;this._properties.top=top,this._properties.right=right,this._properties.bottom=bottom,this._properties.left=left,this.el.addClass("fill"+(top?" fill-top":"")+(right?" fill-right":"")+(bottom?" fill-bottom":"")+(left?" fill-left":"")),removeClass="",top||(removeClass+="fill-top "),right||(removeClass+="fill-right "),bottom||(removeClass+="fill-bottom "),left||(removeClass+="fill-left "),this.el.removeClass(removeClass)},region.prototype.fireResizeEvent=function(){var width,height;width=this.el.width(),height=this.el.height(),data={previous:{width:this._properties.width,height:this._properties.height},current:{}},this._properties.width=width,this._properties.height=height,void 0===data.previous.width||data.previous.width===width&&data.previous.height===height||(data.current.width=width,data.current.height=height,this.el.trigger("fillresize",data))},region.prototype.destroy=function(){this.el.html($("> .fill-region-wrapper",this.el).html()),this._origStyle?this.el.attr("style",this._origStyle):this.el.removeAttr("style"),this.el.removeClass("fill fill-top fill-right fill-bottom fill-left")},fill.classes.Region=region}(jQuery);var fill=fill||{};fill.classes=fill.classes||{},function($){var listener=function(){this._callbacks={}};listener.prototype.addHandler=function(callback){var id,self=this;return id=(new Date).getTime(),this._callbacks[id]=callback,1===Object.keys(this._callbacks).length&&$(window).on("resize.fill",function(){self._fireResizeEvent()}),id},listener.prototype.removeHandler=function(id){delete this._callbacks[id],0===Object.keys(this._callbacks).length&&$(window).off("resize.fill")},listener.prototype._fireResizeEvent=function(){for(var id in this._callbacks)this._callbacks[id]()},fill.classes.WindowResizeListener=new listener}(jQuery);var fill=fill||{};fill.classes=fill.classes||{},function($){var calculator=function(container){this._container=container,this._cells=[],this._rowCnt=0,this._colCnt=0};calculator.prototype.createCells=function(cells){var wrapper,map,size,self=this;wrapper=$("<div style='visibility:visible;float:left'><div style='display:inline-block' class='fill-test-cell'></div></div>").appendTo(this._container),map={rows:[],cols:[]},$.each(cells,function(index,cell){size=self._detectAppliedSizes(cell[0],cell[1],wrapper),map.rows[cell[0]]=size.row,map.cols[cell[1]]=size.col,self._colCnt=Math.max(self._colCnt,cell[1]),self._rowCnt=Math.max(self._rowCnt,cell[0]),wrapper.width(self._container.innerWidth()).height(self._container.innerHeight())}),wrapper.remove(),this._cells=map},calculator.prototype._detectAppliedSizes=function(row,col,wrapper){var testCell,cls,percentSize,width,height,obj;return obj={row:{},col:{}},cls="fill-row-"+row+" fill-col-"+col,testCell=$(".fill-test-cell",wrapper),testCell.addClass(cls),width={type:"fill",size:testCell.width()},width.size&&(wrapper.width(100),percentSize=testCell.width(),percentSize!==width.size?(width.type="percent",width.size=percentSize/100):width.type="fixed"),height={type:"fill",size:testCell.height()},height.size&&(wrapper.height(100),percentSize=testCell.height(),percentSize!==height.size?(height.type="percent",height.size=percentSize/100):height.type="fixed"),testCell.removeClass(cls),{row:height,col:width}},calculator.prototype.calculate=function(width,height,padding){var fillCells,remaining,cellSizes;return remaining=width-(this._colCnt+1)*padding,fillCells=[],cellSizes={},cellSizes.cols=this._calculateCellSizes(this._cells.cols,width,padding),cellSizes.rows=this._calculateCellSizes(this._cells.rows,height,padding),cellSizes},calculator.prototype._calculateCellSizes=function(cells,containerSize,padding){var remaining,fillCells,sizeMap;remaining=containerSize-(cells.length+1)*padding,fillCells=[],sizeMap={};for(var index in cells)cell=cells[index],"fixed"===cell.type?(sizeMap[index]=cell.size,remaining-=sizeMap[index]):"percent"===cell.type?(sizeMap[index]=Math.floor(cell.size*containerSize),remaining-=sizeMap[index]):fillCells.push(index);for(var i=0;i<fillCells.length;i++)sizeMap[fillCells[i]]=Math.floor(remaining/fillCells.length);return sizeMap},fill.classes.CellSizeCalculator=calculator}(jQuery);var fill=fill||{};fill.classes=fill.classes||{},function($){var layoutManager=function(el,options){var defaults={padding:0};this._config=$.extend({},defaults,options),this._el=el,this._init()};layoutManager.prototype._init=function(){this._config.pixelPadding=this._getPaddingInPixels(this._config.padding),this._origStyle=this._el.attr("style"),this._el.css({position:"relative"}),this._cellCalculator=new fill.classes.CellSizeCalculator(this._el),this._buildLayout(),this._renderLayout(),this._el.trigger("fillcreate",{})},layoutManager.prototype._buildLayout=function(){var regions,region,row,col,span,grid,colCnt,tmp,cellIndices;this._width=this._el.width(),this._height=this._el.height(),grid=[],cellIndices=[],colCnt=0,regions=$("> [data-fill]",this._el);for(var i=0;i<regions.length;i++)if(region=new fill.classes.Region($(regions[i]),{contentClass:this._config.contentClass}),row=region.get("row"),col=region.get("col"),null===row||null===col||0>row||0>col)console.warn("Fill region does not have a row and col defined. Region will be skipped");else if(grid[row]||(grid[row]=[]),grid[row][col])console.warn("Duplicate region defined for fill region ("+row+","+col+"). Region will be skipped.");else{if(grid[row][col]=region,span=region.get("colSpan"),!isNaN(span)&&span>1)for(var extraCol=col+1;col+span>extraCol;extraCol++)grid[row][extraCol]=!0;cellIndices.push([row,col]),colCnt=Math.max(col+1,colCnt)}for(var i=0;i<grid.length;i++)for(var j=0;colCnt>j;j++)if(region=grid[i][j],region&&region.type){if("*"===region.get("rowSpan")){span=1;for(var tmp=i+1;tmp<grid.length&&!grid[tmp][j];tmp++)grid[tmp][j]=!0,span++;region.setComputed("rowSpan",span)}if("*"===region.get("colSpan")){span=1;for(var tmp=j+1;colCnt>tmp&&!grid[i][tmp];tmp++)grid[i][tmp]=!0,span++;region.setComputed("colSpan",span)}region.setEdges(0==i,j-1+region.get("colSpan")==colCnt-1,i-1+region.get("rowSpan")==grid.length-1,0==j)}this._grid=grid,this._cellCalculator.createCells(cellIndices)},layoutManager.prototype._renderLayout=function(){var region,x,y,regionWid,regionHt,args,padding,halfPadding,cellSizes;if(!this._grid||0===this._grid.length)return 0;padding=this._config.pixelPadding,halfPadding=padding/2,cellSizes=this._cellCalculator.calculate(this._width,this._height,padding),y=padding;for(var row=0;row<this._grid.length;row++){x=padding;for(var col=0;col<this._grid[row].length;col++)if(region=this._grid[row][col],void 0!==region&&region.type){regionWid=cellSizes.cols[col];for(var tmp=col+1;tmp<col+region.get("colSpan");tmp++)regionWid+=cellSizes.cols[tmp]+padding;regionHt=cellSizes.rows[row];for(var tmp=row+1;tmp<row+region.get("rowSpan");tmp++)regionHt+=cellSizes.rows[tmp]+padding;args={top:y+"px",left:x+"px",width:regionWid+"px",height:regionHt+"px"},region.get("right")&&(delete args.width,args.right=this._width-(x+regionWid)+"px"),region.get("bottom")&&(delete args.height,args.bottom=this._height-(y+regionHt)+"px"),region.el.css(args),region.fireResizeEvent(),x+=cellSizes.cols[col]+padding}else x+=cellSizes.cols[col]+padding;y+=cellSizes.rows[row]+padding}},layoutManager.prototype._getPaddingInPixels=function(padding){var tempEl,pixel=padding;return"string"==typeof padding?padding.indexOf("px")===padding.length-2?pixel=parseInt(padding.substr(0,padding.length-2),10):(tempEl=$("<div style='position:absolute;visible:visible;width:"+padding+"'></div>").appendTo(this._el),pixel=tempEl.width(),tempEl.remove()):(tempEl=$("<div style='position:absolute;visible:visible;' class='fill-padding'></div>").appendTo(this._el),tempEl.outerWidth()===tempEl.outerHeight()?pixel=Math.floor(tempEl.outerWidth()/2):(console.warn("Fill layout manager does not support different vertical and horizontal paddings."),pixel=0),tempEl.remove()),pixel},layoutManager.prototype.refresh=function(){var newWid,newHt;newWid=this._el.width(),newHt=this._el.height(),(newWid!==this._width||newHt!==this._height)&&(this._width=newWid,this._height=newHt,this._renderLayout())},layoutManager.prototype.destroy=function(){var region;if(0<this._grid.length)for(var i=0;i<this._grid.length;i++)for(var j=0;j<this._grid[i].length;j++)region=this._grid[i][j],"undefined"!=typeof region&&null!==region&&region.destroy();this._origStyle?this._el.attr("style",this._origStyle):this._el.removeAttr("style"),this._el.trigger("filldestroy",{})},fill.classes.LayoutManager=layoutManager}(jQuery);var fill=fill||{};fill.classes=fill.classes||{},function($){var plugin=function(el,options){var defaults={autoRefresh:!0};this._init(el,$.extend({},defaults,options))};plugin.prototype._init=function(el,config){var self=this;this._el=el,this._config=config,this._registerEventListeners(),this._layoutManager=new fill.classes.LayoutManager(el,config),this._config.autoRefresh&&(this._resizeHandlerId=fill.classes.WindowResizeListener.addHandler(function(){self._refresh()}))},plugin.prototype._registerEventListeners=function(){this._config.create&&this._el.on("fillcreate.fill-internal",this._config.create),this._config.resize&&this._el.on("fillresize.fill-internal",this._config.resize),this._config.destroy&&this._el.on("filldestroy.fill-internal",this._config.destroy)},plugin.prototype._refresh=function(){this._layoutManager.refresh()},plugin.prototype.refresh=function(){this._refresh()},plugin.prototype.destroy=function(){this._resizeHandlerId&&fill.classes.WindowResizeListener.removeHandler(this._resizeHandlerId),this._layoutManager.destroy(),delete this._layoutManager,this._el.off("fillcreate.fill-internal"),this._el.off("filldestroy.fill-internal"),this._el.off("fillresize.fill-internal")},fill.classes.FillPlugin=plugin}(jQuery);var fill=fill||{};!function($){fill.version="0.1.0";var plugin=function(){var el,plugin,args,action,options;return args=$.makeArray(arguments),"string"==typeof args[0]&&(action=args[0],args=args.splice(0)),options=args[0],$.each(this,function(){el=$(this),plugin=el.data("fill-pi"),plugin||action?plugin&&action&&(plugin[action](options),"destroy"===action&&el.removeData("fill-pi")):(plugin=new fill.classes.FillPlugin(el,options),el.data("fill-pi",plugin))}),this};$.fn.fill?console.warn("jQuery.fn.fill is already defined. Fill Layout Manager cannot be loaded."):$.fn.fill=plugin}(jQuery);
//# sourceMappingURL=fill.min.js.map